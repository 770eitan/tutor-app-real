<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<section>
	<p>From the kitchen of <%= assignment.owner.name %>...</p>
  <h1><%= assignment.name %> ğŸŒ®</h1>
  <h2>This assignment is <%= assignment.completed ? 'completed! ğŸ˜‹' : 'not completed! ğŸ˜«' %></h2>


	<% if (user) { %>
    <form 
      action="/assignments/<%= assignment._id %>/flip-completed?_method=PATCH" 
      method="POST"
    >
      <button class="btn" type="submit">
        Mark assignment <%= assignment.completed ? 'not completed ğŸŒ®ğŸ¥º' : 'completed ğŸŒ®ğŸ‰' %>
      </button>
    </form>
  <% } %>
  <% if (assignment.owner.equals(user?.profile._id)) { %>
    <form action="/assignments/<%= assignment._id %>/edit" method="GET">
      <button class="btn" type="submit">Edit this Assignment ğŸŒ®ğŸš§</button>
    </form>
  <% } %>

	<% if (profile.students.length)  {%>
    <h2>
      <%= isSelf ? "You have" : `${profile.name} has` %> students! Here they are!
    </h2>
    <% profile.students.forEach(student => { %>
      <h3>
        <%= getRandomStudent() %> 
        <%= student.name %> is a <%= student.age %> year old <%= student.breed %>
      </h3>
    <% }) %>
  <% } else { %>
    <h2>
      <%= isSelf ? "You don't" : `${profile.name} doesn't` %> have any students.
    </h2> 
  <% } %> 
</main>

</section>
<%- include('../partials/footer') %>
